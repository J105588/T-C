# 利用規約同意・情報収集フォーム

## 1. プロジェクト概要

このプロジェクトは、Webページ上で利用規約を表示し、ユーザーがそれに同意した場合にのみ個人情報（年・組・氏名・メールアドレスなど）を入力・送信できるフォームを提供します。

送信されたデータは、バックエンドとして利用する **Google Apps Script (GAS)** を経由し、指定されたメールアドレスに通知として送信されます。

### 主な機能

-   利用規約のスクロール表示
-   規約への同意チェックボックス
-   同意するまで入力フォームを非表示にする制御
-   Googleアカウント不要で誰でも利用可能なメール送信機能
-   サーバーレスで実装可能なため、ホスティングが容易

## 2. セットアップ手順

このシステムを動作させるには、以下の2つのステップが必要です。

### ステップ1: バックエンドの設定 (Google Apps Script)

1.  **Google Apps Scriptプロジェクトの作成**
    -   [Google Apps Script](https://script.google.com/home) にアクセスし、「新しいプロジェクト」を作成します。

2.  **スクリプトの貼り付け**
    -   プロジェクトに含まれる `gas-backend/mail-sender.js` ファイル（または別途提供されたGASコード）の中身をすべてコピーし、GASのエディタに貼り付けます。
    -   スクリプト内の `const TO_EMAIL_ADDRESS = "your-email@example.com";` のメールアドレスを、実際に通知を受け取りたいご自身のものに変更してください。

3.  **プロジェクトの保存とデプロイ**
    -   プロジェクトを保存します（フロッピーディスクのアイコン）。
    -   画面右上の青い「**デプロイ**」ボタン > 「**新しいデプロイ**」を選択します。
    -   歯車アイコン（種類の選択）から「**ウェブアプリ**」を選択します。
    -   説明欄に「利用規約フォーム」など、分かりやすい名前をつけます。
    -   **アクセスできるユーザー**の項目を「**全員**」に設定します。（**重要：これを設定しないと外部からアクセスできません**）
    -   「**デプロイ**」ボタンをクリックします。

4.  **承認とURLの取得**
    -   初回デプロイ時には、スクリプトの実行許可を求めるポップアップが表示されます。画面の指示に従い、ご自身のGoogleアカウントを選択し、詳細設定から安全でないページへの移動を許可して、スクリプトの実行を承認してください。
    -   デプロイが完了すると、「**ウェブアプリのURL**」が生成されます。このURLをコピーしておきます。このURLは次のステップで使用します。

### ステップ2: フロントエンドの設定 (HTML)

1.  **HTMLファイルの編集**
    -   ルートディレクトリにある `index.html` ファイルをテキストエディタで開きます。

2.  **GASのURLを貼り付け**
    -   ファイルの下部にある `<script>` タグ内に、以下の記述があります。
        ```javascript
        // ★ Google Apps Script の WebアプリURLをここに貼り付けます
        const GAS_URL = 'ここにGASのURLを貼り付け';
        ```
    -   `'ここにGASのURLを貼り付け'` の部分を、ステップ1でコピーしたウェブアプリのURLに書き換えます。

3.  **利用規約のカスタマイズ（任意）**
    -   必要に応じて、`index.html` 内の `<div class="terms-box">` に含まれる利用規約のテキストを編集してください。

## 3. ファイル構成

```
.
├── index.html              # ユーザーが見るフロントエンドのファイル
├── gas-backend/
│   └── mail-sender.js      # Google Apps Scriptに貼り付けるバックエンドのコード
└── README.md               # このファイル
```

## 4. 使い方

1.  上記セットアップ手順を完了させます。
2.  `index.html` ファイルをWebサーバーにアップロードするか、ローカルでブラウザで開きます。
3.  利用規約を読み、同意チェックボックスにチェックを入れます。
4.  表示されたフォームに情報を入力し、「同意して送信する」ボタンをクリックします。
5.  送信が成功すると、GASで設定したメールアドレスに通知メールが届きます。

## 5. 注意事項

-   Google Apps Scriptの「アクセスできるユーザー」を「全員」に設定しないと、フォームからデータを送信する際にCORSエラーや権限エラーが発生します。
-   `index.html` 内のJavaScriptは、`no-cors` モードで `fetch` を実行しています。これは、GASのウェブアプリが返すレスポンスを直接読み取れない代わりに、CORSエラーを回避するための一般的な手法です。このため、送信が成功したかどうかはネットワークリクエストが完了したかどうかで判断しており、サーバーからの詳細な成功/失敗メッセージは受け取れません。
